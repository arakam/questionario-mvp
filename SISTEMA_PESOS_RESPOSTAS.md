# üéØ Sistema de Pesos para Respostas de Question√°rios

## üìä **Vis√£o Geral**

O sistema de pesos permite avaliar o desempenho dos respondentes baseado na import√¢ncia (peso) de cada pergunta. Cada pergunta tem um peso num√©rico que representa sua relev√¢ncia no question√°rio. **Agora com an√°lise por categoria!**

## üî¢ **Como Funciona**

### **1. Defini√ß√£o de Pesos**
- Cada pergunta tem um campo `peso` (n√∫mero inteiro)
- Pesos maiores = perguntas mais importantes
- Pesos menores = perguntas menos importantes
- Exemplo: pergunta cr√≠tica pode ter peso 10, pergunta secund√°ria peso 2

### **2. C√°lculo dos Pesos**

#### **Peso Total Poss√≠vel**
```
Soma de todos os pesos de todas as perguntas do question√°rio
```
- **Exemplo**: Se o question√°rio tem 5 perguntas com pesos [5, 3, 8, 2, 10], o peso total √© 28

#### **Peso das Respostas SIM**
```
Soma dos pesos das perguntas Sim/N√£o que foram respondidas com "SIM"
```
- **Exemplo**: Se 3 perguntas Sim/N√£o com pesos [5, 3, 8] foram respondidas com SIM, o peso total SIM √© 16

#### **Peso das Respostas N√ÉO**
```
Soma dos pesos das perguntas Sim/N√£o que foram respondidas com "N√ÉO"
```
- **Exemplo**: Se 2 perguntas Sim/N√£o com pesos [2, 10] foram respondidas com N√ÉO, o peso total N√ÉO √© 12

#### **Percentual de Aproveitamento**
```
(Peso das Respostas SIM √∑ Peso Total Poss√≠vel) √ó 100
```
- **Exemplo**: (16 √∑ 28) √ó 100 = 57% de aproveitamento

### **3. An√°lise por Categoria** üÜï
```
Para cada categoria de pergunta, calcula:
- Peso total da categoria
- Peso das respostas SIM da categoria
- Peso das respostas N√ÉO da categoria
- Percentual de aproveitamento da categoria
- Total de perguntas vs perguntas respondidas
```

## üìã **Tipos de Pergunta e Pesos**

### **Perguntas Sim/N√£o (sim_nao)**
- ‚úÖ **Resposta SIM**: Peso √© contabilizado no somat√≥rio SIM
- ‚ùå **Resposta N√ÉO**: Peso √© contabilizado no somat√≥rio N√ÉO
- **Exemplo**: Pergunta com peso 5 respondida com SIM = +5 no somat√≥rio SIM

### **Perguntas de Escala (escala)**
- üî¢ **Peso n√£o √© contabilizado** nos somat√≥rios SIM/N√ÉO
- üìä **Valor da escala** √© exibido na resposta
- **Exemplo**: Pergunta com peso 8 respondida com escala 7 = peso 8 n√£o conta nos somat√≥rios

### **Perguntas de M√∫ltipla Escolha**
- üîò **Peso n√£o √© contabilizado** nos somat√≥rios SIM/N√ÉO
- üìù **Op√ß√£o selecionada** √© exibida na resposta
- **Exemplo**: Pergunta com peso 6 com m√∫ltipla escolha = peso 6 n√£o conta nos somat√≥rios

### **Perguntas de Texto**
- üìù **Peso n√£o √© contabilizado** nos somat√≥rios SIM/N√ÉO
- üí¨ **Texto da resposta** √© exibido
- **Exemplo**: Pergunta com peso 4 com resposta de texto = peso 4 n√£o conta nos somat√≥rios

## üéØ **Casos de Uso**

### **1. Avalia√ß√£o de Conformidade**
- **Perguntas cr√≠ticas** recebem pesos altos (8-10)
- **Perguntas importantes** recebem pesos m√©dios (4-7)
- **Perguntas secund√°rias** recebem pesos baixos (1-3)
- **Percentual de aproveitamento** indica n√≠vel de conformidade

### **2. Auditoria e Compliance**
- **Peso total poss√≠vel** = pontua√ß√£o m√°xima do question√°rio
- **Peso das respostas SIM** = pontua√ß√£o obtida
- **Percentual** = score de compliance (ex: 85% = aprovado)

### **3. An√°lise de Desempenho**
- **Compara√ß√£o** entre diferentes respondentes
- **Ranking** baseado no percentual de aproveitamento
- **Identifica√ß√£o** de √°reas que precisam de melhoria

### **4. An√°lise por Categoria** üÜï
- **Identifica√ß√£o** de categorias com baixo desempenho
- **Foco** em √°reas espec√≠ficas que precisam de melhoria
- **Compara√ß√£o** de performance entre diferentes dom√≠nios
- **Prioriza√ß√£o** de a√ß√µes baseada em categorias cr√≠ticas

## üìä **Exemplo Pr√°tico**

### **Question√°rio de Compliance com Categorias**

| Categoria | Pergunta | Tipo | Peso | Resposta | Peso Contabilizado |
|-----------|----------|------|------|----------|-------------------|
| **Seguran√ßa** | A empresa possui pol√≠tica de seguran√ßa? | Sim/N√£o | 10 | SIM | +10 (SIM) |
| **Seguran√ßa** | Os funcion√°rios recebem treinamento? | Sim/N√£o | 8 | SIM | +8 (SIM) |
| **Seguran√ßa** | Existe backup dos dados? | Sim/N√£o | 6 | N√ÉO | +6 (N√ÉO) |
| **Processos** | Qual o n√≠vel de satisfa√ß√£o? | Escala | 5 | 8 | 0 (n√£o conta) |
| **Processos** | Descreva os processos: | Texto | 3 | "Processos documentados" | 0 (n√£o conta) |

### **C√°lculos Gerais:**
- **Peso Total Poss√≠vel**: 10 + 8 + 6 + 5 + 3 = **32**
- **Peso Respostas SIM**: 10 + 8 = **18**
- **Peso Respostas N√ÉO**: 6 = **6**
- **Percentual de Aproveitamento**: (18 √∑ 32) √ó 100 = **56%**

### **C√°lculos por Categoria:** üÜï

#### **Categoria: Seguran√ßa**
- **Peso Total**: 10 + 8 + 6 = **24**
- **Peso SIM**: 10 + 8 = **18**
- **Peso N√ÉO**: 6 = **6**
- **Aproveitamento**: (18 √∑ 24) √ó 100 = **75%**
- **Perguntas**: 3/3 respondidas

#### **Categoria: Processos**
- **Peso Total**: 5 + 3 = **8**
- **Peso SIM**: 0 (n√£o h√° perguntas Sim/N√£o)
- **Peso N√ÉO**: 0 (n√£o h√° perguntas Sim/N√£o)
- **Aproveitamento**: **0%** (n√£o aplic√°vel)
- **Perguntas**: 2/2 respondidas

## üõ†Ô∏è **Implementa√ß√£o T√©cnica**

### **C√≥digo dos C√°lculos Gerais:**
```typescript
// Peso total poss√≠vel
const pesoTotalPossivel = itens.reduce((sum, item) => sum + item.peso, 0);

// Peso das respostas SIM (apenas perguntas sim/n√£o)
const pesoRespostasSim = itens.reduce((sum, item) => {
  if (item.tipo === 'sim_nao' && item.resposta === true) {
    return sum + item.peso;
  }
  return sum;
}, 0);

// Peso das respostas N√ÉO (apenas perguntas sim/n√£o)
const pesoRespostasNao = itens.reduce((sum, item) => {
  if (item.tipo === 'sim_nao' && item.resposta === false) {
    return sum + item.peso;
  }
  return sum;
}, 0);

// Percentual de aproveitamento geral
const percentualAproveitamento = pesoTotalPossivel > 0 
  ? Math.round((pesoRespostasSim / pesoTotalPossivel) * 100) 
  : 0;
```

### **C√≥digo dos C√°lculos por Categoria:** üÜï
```typescript
// C√°lculos por categoria
const resumoPorCategoria: ResumoCategoria[] = [];

// Agrupar perguntas por categoria
const perguntasPorCategoria = new Map<string, typeof itens>();

for (const item of itens) {
  const categoriaId = item.categoria_id || 'sem_categoria';
  if (!perguntasPorCategoria.has(categoriaId)) {
    perguntasPorCategoria.set(categoriaId, []);
  }
  perguntasPorCategoria.get(categoriaId)!.push(item);
}

// Calcular resumo para cada categoria
for (const [categoriaId, perguntasCategoria] of perguntasPorCategoria) {
  const pesoTotalCategoria = perguntasCategoria.reduce((sum, item) => sum + item.peso, 0);
  
  const pesoSimCategoria = perguntasCategoria.reduce((sum, item) => {
    if (item.tipo === 'sim_nao' && item.resposta === true) {
      return sum + item.peso;
    }
    return sum;
  }, 0);
  
  const pesoNaoCategoria = perguntasCategoria.reduce((sum, item) => {
    if (item.tipo === 'sim_nao' && item.resposta === false) {
      return sum + item.peso;
    }
    return sum;
  }, 0);
  
  const percentualCategoria = pesoTotalCategoria > 0 
    ? Math.round((pesoSimCategoria / pesoTotalCategoria) * 100) 
    : 0;
  
  // ... resto da l√≥gica
}
```

### **Interface Visual:**
- **Cards coloridos** para cada m√©trica geral
- **Grid de categorias** com resumo individual
- **Cores indicativas** por n√≠vel de aproveitamento
- **Tabela expandida** com coluna de categoria

## üé® **Interface do Usu√°rio**

### **Cards de Resumo Geral:**
1. **üîµ Peso Total Poss√≠vel** - Soma de todos os pesos
2. **üü¢ Peso Respostas SIM** - Soma dos pesos das respostas SIM
3. **üî¥ Peso Respostas N√ÉO** - Soma dos pesos das respostas N√ÉO
4. **üü£ Aproveitamento Geral** - Percentual SIM √∑ Total

### **Resumo por Categoria:** üÜï
- **Cards individuais** para cada categoria
- **Percentual destacado** com cores indicativas
- **M√©tricas espec√≠ficas** por categoria
- **Ordena√ß√£o** por desempenho (melhor para pior)

### **Tabela de Respostas:**
- **Coluna Categoria** adicionada
- **Coluna Peso** destacada em negrito
- **Tipos de pergunta** com cores diferentes
- **Respostas** formatadas conforme o tipo
- **Timestamps** de quando foi respondido

## üìà **M√©tricas e KPIs**

### **Indicadores Principais:**
- **Taxa de Resposta**: Respostas √∑ Total de Perguntas
- **Score de Compliance**: Peso SIM √∑ Peso Total
- **Distribui√ß√£o de Pesos**: Como os pesos est√£o distribu√≠dos
- **Tempo de Resposta**: M√©dia do tempo para responder

### **Indicadores por Categoria:** üÜï
- **Performance por Dom√≠nio**: Aproveitamento espec√≠fico de cada categoria
- **Identifica√ß√£o de Gargalos**: Categorias com baixo desempenho
- **Compara√ß√£o Setorial**: Performance entre diferentes √°reas
- **Foco em Melhorias**: Prioriza√ß√£o baseada em categorias cr√≠ticas

### **Relat√≥rios Poss√≠veis:**
- **Ranking de Respondentes** por percentual geral
- **An√°lise por Categoria** de pergunta
- **Tend√™ncias Temporais** de respostas por categoria
- **Compara√ß√£o entre Question√°rios** por dom√≠nio
- **Dashboard Executivo** com vis√£o consolidada por categoria

## üîÆ **Funcionalidades Futuras**

### **1. Pesos Din√¢micos**
- **Pesos condicionais** baseados em outras respostas
- **Pesos adaptativos** conforme o contexto
- **Pesos por perfil** do respondente

### **2. An√°lise Avan√ßada**
- **Correla√ß√µes** entre diferentes categorias
- **Padr√µes** de resposta por peso e categoria
- **Alertas** para baixo aproveitamento por categoria
- **Benchmarks** entre diferentes dom√≠nios

### **3. Dashboard Executivo**
- **Vis√£o consolidada** de m√∫ltiplos question√°rios
- **Gr√°ficos** de evolu√ß√£o temporal por categoria
- **M√©tricas comparativas** entre per√≠odos e categorias
- **Relat√≥rios autom√°ticos** de performance por dom√≠nio

## ‚úÖ **Benef√≠cios do Sistema**

1. **üìä Avalia√ß√£o Quantitativa** - M√©tricas objetivas de desempenho
2. **üéØ Foco nas Prioridades** - Perguntas importantes t√™m mais peso
3. **üìà Acompanhamento** - Evolu√ß√£o do compliance ao longo do tempo
4. **üîç An√°lise Comparativa** - Compara√ß√£o entre respondentes
5. **üìã Relat√≥rios Executivos** - Dados para tomada de decis√£o
6. **üè∑Ô∏è An√°lise por Categoria** - Identifica√ß√£o de √°reas espec√≠ficas de melhoria üÜï
7. **üéØ Foco Direcionado** - Prioriza√ß√£o de a√ß√µes por dom√≠nio üÜï
8. **üìä Vis√£o Granular** - Performance detalhada por categoria üÜï

## üöÄ **Como Usar**

### **1. Configurar Pesos e Categorias:**
- Ao criar perguntas, defina o peso apropriado
- Use pesos altos para perguntas cr√≠ticas
- Use pesos baixos para perguntas secund√°rias
- **Organize perguntas em categorias** para an√°lise segmentada

### **2. Analisar Resultados:**
- Acesse o detalhe das respostas
- Verifique os cards de resumo geral
- **Analise o resumo por categoria**
- Identifique categorias com baixo desempenho

### **3. Tomar A√ß√µes:**
- Identifique √°reas com baixo aproveitamento geral
- **Foque em categorias espec√≠ficas** que precisam de melhoria
- Use os dados para melhorar processos por dom√≠nio
- **Priorize a√ß√µes** baseadas no desempenho por categoria

## üéØ **Exemplo de Uso Pr√°tico**

### **Cen√°rio: Question√°rio de Compliance Empresarial**

1. **Categoria: Seguran√ßa da Informa√ß√£o** - 75% de aproveitamento
   - ‚úÖ Pol√≠tica de seguran√ßa implementada
   - ‚úÖ Treinamento de funcion√°rios
   - ‚ùå Backup de dados n√£o configurado

2. **Categoria: Processos Internos** - 60% de aproveitamento
   - ‚úÖ Documenta√ß√£o de processos
   - ‚ùå Controles de qualidade
   - ‚ùå Auditorias regulares

3. **Categoria: Recursos Humanos** - 90% de aproveitamento
   - ‚úÖ Pol√≠tica de contrata√ß√£o
   - ‚úÖ Treinamento cont√≠nuo
   - ‚úÖ Avalia√ß√£o de desempenho

### **A√ß√µes Recomendadas:**
1. **Prioridade Alta**: Melhorar backup de dados (Seguran√ßa)
2. **Prioridade M√©dia**: Implementar controles de qualidade (Processos)
3. **Prioridade Baixa**: Manter excel√™ncia em RH

O sistema de pesos com an√°lise por categoria transforma question√°rios simples em ferramentas poderosas de avalia√ß√£o, compliance e an√°lise de desempenho por dom√≠nio! üéØ‚ú®üè∑Ô∏è
